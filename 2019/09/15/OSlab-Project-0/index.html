<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="OSlab_Project_0"><meta name="keywords" content="Linux"><meta name="author" content="其培之也,undefined"><meta name="copyright" content="其培之也"><title>OSlab_Project_0 | Xia Peizhi</title><link rel="shortcut icon" href="/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Project-0"><span class="toc-number">1.</span> <span class="toc-text">Project 0</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Part-1"><span class="toc-number">1.1.</span> <span class="toc-text">Part 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Part-2"><span class="toc-number">1.2.</span> <span class="toc-text">Part 2</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bonus-1"><span class="toc-number">2.</span> <span class="toc-text">Bonus 1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bonus-2"><span class="toc-number">3.</span> <span class="toc-text">Bonus 2</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">其培之也</div><div class="author-info__description text-center">ECNU CS</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">7</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">5</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Xia Peizhi</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">OSlab_Project_0</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-15</time><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1.1k</span><span class="post-meta__separator">|</span><span>Reading time: 4 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Project-0"><a href="#Project-0" class="headerlink" title="Project 0"></a>Project 0</h1><h2 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h2><p><code>s1.sh</code>:</p>
<p>The script first builds a new directory <code>foo</code> in the current directory (the one contains <code>s1.sh</code>), then creates two files: “name.txt” containing your name; “stno.txt” containing your student number. Finally, it makes a copy of “name.txt” and “stno.txt” in the same directory of <code>foo</code>.<br>第一部分的第一个脚本要实现在当前目录下建立一个文件夹<code>foo</code>,然后建立一个<code>name.txt</code>文件包含自己的名字以及一个<code>stno.txt</code>文件包含自己的学号。最后将这两个文件复制到<code>foo</code>文件夹下。<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">if [ $# -eq 0 ]             #如果没有参数的话，文件名就叫foo</span><br><span class="line">then</span><br><span class="line">name=&quot;foo&quot;</span><br><span class="line">else                        #否则就按照输入的文件名</span><br><span class="line">name=$1</span><br><span class="line">fi</span><br><span class="line">mkdir -p $&#123;name&#125;        # mkdir命令用于创建名称为dirName的子目录，参数-p确保目录名称存在，不存在就建一个</span><br><span class="line"></span><br><span class="line">echo 夏培之 &gt;&gt; name.txt</span><br><span class="line">echo 10175102161 &gt;&gt; stno.txt</span><br><span class="line">cp name.txt $&#123;name&#125;/       #将两个txt文件拷贝到之前建立的文件内</span><br><span class="line">cp stno.txt $&#123;name&#125;/</span><br></pre></td></tr></table></figure></p>
<p><code>s2.sh</code>:</p>
<p>It generates a text file <code>output</code>. Each row of <code>output</code> represents a file in directory <code>/bin</code>, and contains three fields which are name, owner and permission of that file. The fields should be separated by white spaces. Furthermore,<br>All file names in <code>output</code> should start with letter <code>&quot;b&quot;</code> (other files should be excluded)<br>The file <code>output</code> is sorted by the file name field (in order of alphabet, from small to large)<br>The file <code>output</code> is read only for other users</p>
<p>第二个脚本要实现在<code>/bin</code>文件下，，以 <code>b</code> 开头的文件输出到 <code>output.txt</code>中，每行1个文件，每个文件输出3个 字段，分别是文件名、所有者和文件权限，3个字段用 <code>White Space</code> 分隔，也就是说， TAB 、 空格 等都OK，这些文件按照字母表自然序列升序排列，最后是要设置<code>output.txt</code>文件的权限，将 <code>output.txt</code> 设置为对其他用户只读。</p>
<div style="page-break-after: always;"></div>



<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">find -name &apos;b*&apos; -printf &quot;%P\t%u\t%M\n&quot; | sort</span><br><span class="line"></span><br><span class="line">chmod go-w output.txt</span><br></pre></td></tr></table></figure>
<p><code>b*</code>通配符，找到以b开头的文件。<br>默认就是升序排序，所以也不用其他什么参数，<code>|</code>管道给<code>sort</code>进行排序。<br><code>chmod go-w output.txt</code>设置了对其他用户的只读权限。</p>
<h2 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h2><p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2.png" alt=""></p>
<p>首先尝试编译一下所给的<code>set_operation.c</code>：<br><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_1.png" alt=""><br>嗐，多了一个<code>-&gt;</code><br>修改了之后，编译成一个可执行的文件<br><code>gcc -g set_operation.c -o set_operation</code>生成的可执行文件的名字我就叫<code>set_operation</code>了，上一个截图中最后漏了一个<code>n</code>，所以我初次执行<code>./set_operation</code>的时候还报错了（因为一开始文件名错了，那当然执行的时候找不到这个文件了），我懒得重新截图了，凑合一下。</p>
<p>执行结果如图：<br><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_2.png" alt=""><br>报了<code>Segmentation fault(core dumped)</code>这样的错误。<br><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_3.jpg" alt=""><br><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_4.png" alt=""><br>那就是在91行之前可以操作一下，用<code>li 80,90</code>把前面10行代码调出来看看。<br>在84行设置断点：</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_5.jpg" alt=""></p>
<p>再调出80-90行的代码看一下，仔细看会发现for循环中<code>i&lt;=A_size</code>这里有问题，应该是<code>i&lt;A_size</code>即可。<br><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_5.png" alt=""><br>修改之后重新编译运行，仍然报了<code>Segmentation fault(core dumped)</code>这样的错误。用gdb来run一下提示26行有问题。</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_5.png" alt=""></p>
<p>调出26行附近的代码：</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_6.png" alt=""></p>
<p>p不为空，但是p不为空不代表p的next不为空。但是原来的代码<code>if((p-&gt;next)-&gt;number==num)</code>却是先指向了next再指向number。<br>将代码修改为：</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_7.png" alt=""></p>
<p>重新执行：</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_8.png" alt=""></p>
<p>显示的错误为<code>sh: 1: pause: not found</code><br>根据一个大佬的说法：“Windows下因为双击运行，得到结果以后会exit，所以需要pause一下来观察结果。 但是Linux下没有这个问题，直接终端运行输出，结果就终端可以看到，所以没有pause这个命令 ”<br>那就删掉就可以了。</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_9.png" alt=""></p>
<p>另外就是发现输出的值并不正确，观看这一部分代码：</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_10.png" alt=""></p>
<p>注释中说明要的是元素在B里，可是代码里<code>!</code>是<code>not</code>,刚好反了，将它删掉。这样的错误代码中有两处，另一处是表达元素在A里的那一行。<br>再次编译运行，结果就正确了。</p>
<h1 id="Bonus-1"><a href="#Bonus-1" class="headerlink" title="Bonus 1"></a>Bonus 1</h1><p>新建一个文件，里面随便写点东西，超过10行就ok。</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_6.jpg" alt=""></p>
<p><code>awk &#39;(NR==10){print}&#39; Bonus_1</code>便可输出第十行</p>
<p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_11.png" alt=""></p>
<h1 id="Bonus-2"><a href="#Bonus-2" class="headerlink" title="Bonus 2"></a>Bonus 2</h1><p><img src="/2019/09/15/OSlab-Project-0/Project_0_Part_2_12.png" alt=""><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk &apos;&#123;</span><br><span class="line">	for(i=1;i&lt;=NF;i++)&#123;</span><br><span class="line">	if(NR==1)&#123;</span><br><span class="line">		a[i]=$i</span><br><span class="line">	&#125;</span><br><span class="line">	else&#123;</span><br><span class="line">		a[i]=a[i]&quot; &quot;$i</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">     &#125;END&#123;</span><br><span class="line">	for(i=1;a[i]!=&quot;&quot;;i++)&#123;</span><br><span class="line">		print a[i]&#125;</span><br><span class="line">	&#125;&apos; $1</span><br><span class="line"></span><br><span class="line">#执行 ./Bonus_2.sh，传入命令行参数作为文件名，例如，./Bonus_2.sh Bonus_2.txt</span><br></pre></td></tr></table></figure></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">其培之也</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://moriarty98.github.io/2019/09/15/OSlab-Project-0/">https://moriarty98.github.io/2019/09/15/OSlab-Project-0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2019/06/09/维吉尼亚表和列置换结合加密/"><span>维吉尼亚表和列置换结合加密</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By 其培之也</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>